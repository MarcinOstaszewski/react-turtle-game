(this["webpackJsonpreact-turtle-game"]=this["webpackJsonpreact-turtle-game"]||[]).push([[0],[,,function(t,e,a){t.exports={Tortoise:"Tortoise_Tortoise__1nBSv",head:"Tortoise_head__1FJP6",flap:"Tortoise_flap__3RIpl",left:"Tortoise_left__uA1V7",rear:"Tortoise_rear__1iV6f",star:"Tortoise_star__62GPc"}},function(t,e,a){t.exports={scene:"Scene_scene__2Gm2R",healthbar:"Scene_healthbar__3T-gd",topBar:"Scene_topBar__1Peni",score:"Scene_score__3sezF"}},,,,,,,function(t,e,a){t.exports={start:"Start_start__KWVfT",btn:"Start_btn__tZCI2"}},function(t,e,a){t.exports={gameover:"GameOver_gameover__1Rc89",btn:"GameOver_btn__S8gyv"}},,,function(t,e,a){t.exports=a(21)},,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var r=a(0),o=a.n(r),n=a(13),s=a.n(n),i=(a(19),a(4)),l=a(1),c=a(5),h=a(6),p=a(9),d=a(8),m=(a(20),a(3)),g=a.n(m),f=a(10),u=a.n(f),v=function(t){return o.a.createElement("div",{id:u.a.start},o.a.createElement("div",null,"Catch the circles for points."),o.a.createElement("div",null,"Brighter circles give more points."),o.a.createElement("div",null,"The greater is your's and circle's speed the more you score."),o.a.createElement("div",null,"Collisions at high speed hurt you."),o.a.createElement("div",null,"Red circles heal you."),o.a.createElement("div",null,"Use ",o.a.createElement("strong",null,"w, s, a, d")," keys."),o.a.createElement("div",{className:u.a.btn,onClick:function(){return t.changeGameState("game")}},"START"))},y=a(11),S=a.n(y),b=function(t){return console.log(t),o.a.createElement("div",{id:S.a.gameover},o.a.createElement("h2",null,"GAME OVER"),o.a.createElement("p",null,"Your score: ",t.score),o.a.createElement("div",{className:S.a.btn,onClick:function(){return t.changeGameState("start")}},"RESTART"))},V=function(t){var e,a,r={width:t.width*t.health/200+"px",left:t.width/2-t.width*t.health/400+"px",backgroundColor:"hsl(".concat(t.health,", 70%, 35%)")},n="";return"start"===t.gameState?(n=o.a.createElement(v,{changeGameState:t.changeGameState}),e=o.a.createElement("div",{className:g.a.score},"Hiscore: ",o.a.createElement("span",{id:"score"},localStorage.hiscore||0))):"game"===t.gameState?(a=o.a.createElement("div",{id:g.a.healthbar,style:r}),e=o.a.createElement("div",{className:g.a.score},"Score: ",o.a.createElement("span",{id:"score"},t.score))):"over"===t.gameState&&(n=o.a.createElement(b,{score:t.score,changeGameState:t.changeGameState})),o.a.createElement("div",null,o.a.createElement("div",{id:g.a.scene,style:t}),o.a.createElement("div",{id:g.a.topBar}),a,e,n)},w=a(7),E=a(2),_=a.n(E),k=function(t,e,a,r){return{left:t+r+"px",top:e+a+"px"}},z=function(t){var e=0+t%360;return t<-180&&(e=t+360),e},O=function(t,e,a){var r=t.left,o=t.top,n=t.health,s=e.bounceFactor,i=e.tortoiseSize,l=a.scrWidth,c=a.scrHeight,h=t.horizontalVelocity,p=t.verticalVelocity,d={horizontalVelocity:h,verticalVelocity:p,health:n};return o+h>c-i&&(d.health-=Math.abs(parseInt(d.horizontalVelocity)),d.horizontalVelocity*=s),r+p>l-i&&(d.health-=Math.abs(parseInt(d.verticalVelocity)),d.verticalVelocity*=s),o+h<e.topBarHeight&&(d.health-=Math.abs(parseInt(d.horizontalVelocity)),d.horizontalVelocity*=s),r+p<0&&(d.health-=Math.abs(parseInt(d.verticalVelocity)),d.verticalVelocity*=s),d},j=function(t,e,a,r){var o=r.size,n=e-parseInt(r.left.slice(0,-2)),s=a-parseInt(r.top.slice(0,-2));return Math.sqrt(n*n+s*s)<.7*(t+o)},T=function(t,e){var a=e,r=Math.floor(Math.random()*(a.props.scrWidth-60)+30),o=Math.floor(Math.random()*(a.props.scrHeight-60)+30);a.setState((function(e){var a=e.starsArr.map((function(t){return t}));return a[t]={size:20,hSpeed:4*Math.random()-2,vSpeed:4*Math.random()-2,left:r+"px",top:o+"px",bgColor:F(0,C.starColors.length)},{starsArr:a}})),++a.starsCount,a.starInterval[t]=window.setInterval(I.bind(null,t,a),a.props.frameLength)},I=function(t,e){var a=e,r=a.state.starsArr[t],o=parseFloat(r.left),n=parseFloat(r.top),s=parseInt(r.transform)+r.rotationVelocity,i=r.hSpeed,c=r.vSpeed;o+r.hSpeed<=0&&(i=0-r.hSpeed),o+r.hSpeed>a.props.scrWidth-r.size&&(i=0-r.hSpeed),n+r.vSpeed<C.topBarHeight&&(c=0-r.vSpeed),n+r.vSpeed>a.props.scrHeight-r.size&&(c=0-r.vSpeed),a.setState((function(e){return{starsArr:e.starsArr.map((function(e,a){return a===t?Object(l.a)(Object(l.a)({},e),{},{left:o+i+"px",top:n+c+"px",vSpeed:c,hSpeed:i,transform:s}):e}))}}))},M=function(t,e){var a=Object.assign({},Object(l.a)({},t));return Math.abs(a.verticalVelocity)>.01?a.verticalVelocity=.97*a.verticalVelocity:a.verticalVelocity=0,Math.abs(a.horizontalVelocity)>.01?a.horizontalVelocity=.97*a.horizontalVelocity:a.horizontalVelocity=0,a.rotationVelocity>e?a.rotationVelocity=e:a.rotationVelocity<-e?a.rotationVelocity=-e:Math.abs(a.rotationVelocity)>.1?a.rotationVelocity*=.97:a.rotationVelocity=0,{rotation:a.rotation,verticalVelocity:a.verticalVelocity,horizontalVelocity:a.horizontalVelocity}},x=function(t,e){var a=Object.assign({},Object(l.a)({},t));return 0===a.moving?e[a.key]?{transform:"rotate("+(a.sign?"-":"")+"20deg)",moving:60,speed:1.3}:{}:30===a.moving?{transform:"rotate("+(a.sign?"-":"")+"80deg)",moving:--a.moving,speed:0}:a.moving<=60&&a.moving>0?{moving:--a.moving,speed:a.moving>55?1.15*a.speed:.97*a.speed}:void 0},F=function(t,e){return Math.floor(Math.random()*e-t)+t},C={starColors:["#EF5757","#e67474","#DE9079","#C5DE79","#C0DA74","#ADC668","#9AB15D","#869D51","#738846","#60743A"],maxStarsCount:3,bounceFactor:-.33,maxVelocity:.35,maxRotation:2.5,tortoiseSize:35,topBarHeight:40},A=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={starsArr:[],leftFlap:{transform:""},rightFlap:{transform:""},head:"-10px",rotationVelocity:0},t.starInterval=[],t.resetThisState=function(){t.setState({rearRightTransform:"",rearLeftTransform:"",left:t.props.scrWidth/2+"px",top:t.props.scrHeight/2+"px",rotation:0,horizontalVelocity:0,verticalVelocity:0,health:t.props.health,leftFlap:{moving:0,speed:0,transform:"",sign:0,key:"a"},rightFlap:{moving:0,speed:0,transform:"",sign:1,key:"d"},head:"-10px",rotationVelocity:0})},t.update=function(){if("game"===t.props.gameState){var e,a={leftFlap:Object(l.a)({},t.state.leftFlap),rightFlap:Object(l.a)({},t.state.rightFlap),rearLeftTransform:"rotate(-20deg)",rearRightTransform:"rotate(20deg)",top:parseFloat(t.state.top),left:parseFloat(t.state.left),rotation:t.state.rotation+0,rotationVelocity:t.state.rotationVelocity,head:"-10px",health:t.state.health};Object.assign(a.leftFlap,x(a.leftFlap,t.props.keysPressed)),Object.assign(a.rightFlap,x(a.rightFlap,t.props.keysPressed)),a.rotation=a.rotation+a.leftFlap.speed-a.rightFlap.speed,a.horizontalVelocity=t.state.horizontalVelocity-C.maxVelocity*(a.leftFlap.speed+a.rightFlap.speed)/4*Math.cos(t.state.rotation*Math.PI/180),a.verticalVelocity=t.state.verticalVelocity+C.maxVelocity*(a.leftFlap.speed+a.rightFlap.speed)/4*Math.sin(t.state.rotation*Math.PI/180),t.props.keysPressed.s&&(a.rearRightTransform="rotate(-40deg)",a.rearLeftTransform="rotate(40deg)",a.horizontalVelocity=.97*a.horizontalVelocity,a.verticalVelocity=.97*a.verticalVelocity),Object.assign(a,M(a,C.maxRotation));for(var r=0;r<t.state.starsArr.length;r++){var o=t.state.starsArr[r];if(j(C.tortoiseSize,a.left,a.top,o)){var n=parseInt(Math.abs(a.horizontalVelocity)+Math.abs(a.verticalVelocity)+Math.abs(o.hSpeed)+Math.abs(o.vSpeed))+(C.starColors.length-o.bgColor);o.bgColor<3?(console.log("<3"),a.health<100?(console.log("health < 100"),a.health-=4*o.bgColor-12):(console.log("MULTI"),t.props.addToScore(2*n))):t.props.addToScore(n),window.clearInterval(t.starInterval[r]),T(r,Object(w.a)(t))}}t.props.keysPressed.w&&(a.head="-20px",a.horizontalVelocity*=1.005,a.verticalVelocity*=1.005),Object.assign(a,O(a,C,t.props)),Object.assign(a,k(a.left,a.top,a.horizontalVelocity,a.verticalVelocity)),Object.assign(a,z(a.rotation)),t.state.health&&(e=t.state.health-a.health),t.setState(Object(l.a)({},a)),e&&0!==e&&t.props.updateHealth(e)}},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.resetThisState(),window.onresize=function(){return t.props.checkWindowSize()},this.interval=window.setInterval(this.update,this.props.frameLength)}},{key:"componentDidUpdate",value:function(t,e){"start"===t.gameState&&"game"===this.props.gameState&&(console.log(this.props.left,this.props.top),this.setState({rotation:0,left:this.props.scrWidth/2+"px",top:this.props.scrHeight/2+"px",horizontalVelocity:0,verticalVelocity:0})),this.state.starsArr.length<C.maxStarsCount&&T(this.state.starsArr.length,this)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval),window.clearInterval(this.starInterval)}},{key:"render",value:function(){var t=this.state.starsArr.map((function(t,e){return o.a.createElement("div",{className:_.a.star,key:e,style:{left:t.left,top:t.top,backgroundColor:C.starColors[t.bgColor]}})}));return o.a.createElement("div",null,t,o.a.createElement("div",{id:_.a.Tortoise,style:{left:this.state.left,top:this.state.top,transform:"rotate(".concat(this.state.rotation,"deg)")}},o.a.createElement("div",{className:_.a.head,style:{top:this.state.head}}),o.a.createElement("div",{className:_.a.flap,style:{transform:this.state.rightFlap.transform}}),o.a.createElement("div",{className:[_.a.flap,_.a.left].join(" "),style:{transform:this.state.leftFlap.transform}}),o.a.createElement("div",{className:_.a.rear,style:{transform:this.state.rearRightTransform}}),o.a.createElement("div",{className:[_.a.rear,_.a.left].join(" "),style:{transform:this.state.rearLeftTransform}})))}}]),a}(r.Component),H=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,rotation:0,keysPressed:{},score:0,health:100,gameState:"start"},t.frameLength=16,t.checkWindowSize=function(){t.setState({windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight})},t.addToScore=function(e){t.setState({score:t.state.score+e})},t.updateHealth=function(e){t.state.health-e>=100?t.setState({health:100}):t.state.health-2*e>0?t.setState({health:t.state.health-2*e}):t.changeGameState("over")},t.changeGameState=function(e){var a={gameState:e};"game"===e&&Object.assign(a,{rotation:0,keysPressed:{},score:0,health:100}),"over"===e&&(localStorage.hiscore=Math.max(t.state.score,localStorage.hiscore)),t.setState(Object(l.a)({},a))},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;document.onkeyup=function(e){var a=Object(l.a)({},t.state.keysPressed);delete a[e.key],t.setState({keysPressed:a})},document.onkeydown=function(e){var a=Object(l.a)(Object(l.a)({},t.state.keysPressed),{},Object(i.a)({},e.key,1));t.setState({keysPressed:a})}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(V,{width:this.state.windowInnerWidth,height:this.state.windowInnerHeight,backgroundColor:"#132f4c",health:this.state.health,score:this.state.score,gameState:this.state.gameState,changeGameState:this.changeGameState}),o.a.createElement(A,{scrWidth:this.state.windowInnerWidth,scrHeight:this.state.windowInnerHeight,rotation:this.state.rotation,keysPressed:this.state.keysPressed,frameLength:this.frameLength,checkWindowSize:this.checkWindowSize,addToScore:this.addToScore,updateHealth:this.updateHealth,health:this.state.health,gameState:this.state.gameState}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.f5ce6086.chunk.js.map