(this["webpackJsonpreact-turtle-game"]=this["webpackJsonpreact-turtle-game"]||[]).push([[0],[,,function(t,e,a){t.exports={healthIndicator:"Tortoise_healthIndicator__3k7Oo",Tortoise:"Tortoise_Tortoise__1nBSv",head:"Tortoise_head__1FJP6",flap:"Tortoise_flap__3RIpl",left:"Tortoise_left__uA1V7",rear:"Tortoise_rear__1iV6f",star:"Tortoise_star__62GPc",obstacle:"Tortoise_obstacle__3e4Wz",flickering:"Tortoise_flickering__8x6Fu",pointsAnimated:"Tortoise_pointsAnimated__FtVsB",display:"Tortoise_display__KIebZ"}},function(t,e,a){t.exports={scene:"Scene_scene__2Gm2R",healthbar:"Scene_healthbar__3T-gd",topBar:"Scene_topBar__1Peni",score:"Scene_score__3sezF"}},,,,,,,function(t,e,a){t.exports={start:"Start_start__KWVfT",btn:"Start_btn__tZCI2"}},function(t,e,a){t.exports={gameover:"GameOver_gameover__1Rc89",btn:"GameOver_btn__S8gyv"}},,,,function(t,e,a){t.exports=a(22)},,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var r=a(0),o=a.n(r),s=a(13),n=a.n(s),i=(a(20),a(4)),l=a(1),c=a(5),h=a(6),p=a(9),d=a(8),m=(a(21),a(3)),u=a.n(m),f=a(10),g=a.n(f),v=function(t){return o.a.createElement("div",{id:g.a.start},o.a.createElement("div",null,"Catch the circles for points."),o.a.createElement("div",null,"Brighter circles give more points."),o.a.createElement("div",null,"The greater is your's and circle's speed the more you score."),o.a.createElement("div",null,"Collisions with walls and obstacles hurt you."),o.a.createElement("div",null,"Red circles heal you or give more points."),o.a.createElement("div",null,"Use ",o.a.createElement("strong",null,"w, s, a, d")," keys."),o.a.createElement("div",{className:g.a.btn,onClick:function(){return t.changeGameState("game")}},"START"))},y=a(11),S=a.n(y),b=function(t){return o.a.createElement("div",{id:S.a.gameover},o.a.createElement("h2",null,"GAME OVER"),o.a.createElement("h3",null,"Your score:"),o.a.createElement("h1",null,t.score),o.a.createElement("div",{className:S.a.btn,onClick:function(){return t.changeGameState("start")}},"RESTART"))},w=function(t){var e,a,r={width:t.width*t.health/200,left:t.width/2-t.width*t.health/400,backgroundColor:"hsl(".concat(t.health,", 70%, 35%)")},s="";return"start"===t.gameState?(s=o.a.createElement(v,{changeGameState:t.changeGameState}),e=o.a.createElement("div",{className:u.a.score},"Hiscore: ",o.a.createElement("span",{id:"score"},localStorage.hiscore||0))):"game"===t.gameState?(a=o.a.createElement("div",{id:u.a.healthbar,style:r}),e=o.a.createElement("div",{className:u.a.score},"Score: ",o.a.createElement("span",{id:"score"},t.score))):"over"===t.gameState&&(s=o.a.createElement(b,{score:t.score,changeGameState:t.changeGameState})),o.a.createElement("div",null,o.a.createElement("div",{id:u.a.scene,style:t}),o.a.createElement("div",{id:u.a.topBar}),a,e,s)},_=a(7),V=a(2),A=a.n(V),E=a(14),k=function(t,e,a,r){return{left:t+r,top:e+a}},O=function(t){var e=0+t%360;return t<-180&&(e=t+360),e},z=function(t,e,a){var r=t.left,o=t.top,s=t.health,n=e.bounceFactor,i=e.tortoiseSize,l=a.scrWidth,c=a.scrHeight,h=t.horizontalVelocity,p=t.verticalVelocity,d={horizontalVelocity:h,verticalVelocity:p,health:s};return(o+h>c-i/2||o+h<e.topBarHeight+i/2)&&(d.health-=Math.abs(parseInt(d.horizontalVelocity)),d.horizontalVelocity*=n),(r+p>l-i/2||r+p<0+i/2)&&(d.health-=Math.abs(parseInt(d.verticalVelocity)),d.verticalVelocity*=n),d},T=function(t,e,a,r){var o=r.size,s=e-r.left,n=a-r.top;return Math.sqrt(s*s+n*n)<.7*(t+o)},j=function(t,e,a,r){return a-t/2>r.top&&a+t/2<r.top+r.height&&(r.left>e-t/2&&r.left<e+t/2||void 0)},C=function(t,e,a,r){return 1===x(1,2)?x(t,e):x(a,r)},F=function(t,e,a){var r=e,o=r.left||r.props.scrWidth/2,s=r.top||r.props.scrHeight/2;(o<a||o>r.props.scrWidth-a)&&(o=r.props.scrWidth/2),(s<a||s>r.props.scrHeight-a)&&(s=r.props.scrHeight/2);var n=C(2*a,o-2*a,o+2*a,r.props.scrWidth-2*a),i=C(2*a+G.topBarHeight,s-2*a,s+2*a,r.props.scrHeight-2*a);r.setState((function(e){var a=e.starsArr.map((function(t){return t}));return a[t]={size:20,hSpeed:4*Math.random()-2,vSpeed:4*Math.random()-2,left:n,top:i,bgColor:x(0,G.starColors.length-1)},{starsArr:a}})),++r.starsCount,r.starInterval[t]=window.setInterval(I.bind(null,t,r),r.props.frameLength)},I=function(t,e){var a=e,r=a.state.starsArr[t],o=parseFloat(r.left),s=parseFloat(r.top),n=r.hSpeed,i=r.vSpeed;o+r.hSpeed<=0&&(n=0-r.hSpeed),o+r.hSpeed>a.props.scrWidth-r.size&&(n=0-r.hSpeed),s+r.vSpeed<G.topBarHeight&&(i=0-r.vSpeed),s+r.vSpeed>a.props.scrHeight-r.size&&(i=0-r.vSpeed),a.setState((function(e){return{starsArr:e.starsArr.map((function(e,a){return a===t?Object(l.a)(Object(l.a)({},e),{},{left:o+n,top:s+i,vSpeed:i,hSpeed:n}):e}))}}))},H=function(t,e){var a=Object.assign({},Object(l.a)({},t));return Math.abs(a.verticalVelocity)>.01?a.verticalVelocity=.97*a.verticalVelocity:a.verticalVelocity=0,Math.abs(a.horizontalVelocity)>.01?a.horizontalVelocity=.97*a.horizontalVelocity:a.horizontalVelocity=0,a.rotationVelocity>e?a.rotationVelocity=e:a.rotationVelocity<-e?a.rotationVelocity=-e:Math.abs(a.rotationVelocity)>.1?a.rotationVelocity*=.97:a.rotationVelocity=0,{rotation:a.rotation,verticalVelocity:a.verticalVelocity,horizontalVelocity:a.horizontalVelocity}},W=function(t,e){var a=Object.assign({},Object(l.a)({},t));return 0===a.moving?e[a.key]?{transform:"rotate("+(a.sign?"-":"")+"20deg)",moving:60,speed:1.3}:{}:30===a.moving?{transform:"rotate("+(a.sign?"-":"")+"80deg)",moving:--a.moving,speed:0}:a.moving<=60&&a.moving>0?{moving:--a.moving,speed:a.moving>55?1.15*a.speed:.97*a.speed}:void 0},x=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},M=function(t){return t.map((function(t){return{top:t.t,left:t.l,height:t.h}}))},N=function(t,e,a,r){var o=0;if(t.pointsAnimated.length){var s=[];t.pointsAnimated.forEach((function(t){return s.push(t.score)})),o=s.reduce((function(t,e){return t+e}),0)}var n=0,i=parseInt(Math.abs(t.horizontalVelocity)+Math.abs(t.verticalVelocity)+Math.abs(e.hSpeed)+Math.abs(e.vSpeed))+(a.length-e.bgColor)+o;return e.bgColor<3?t.health<100?(n=4*e.bgColor-12,t.health-=n,i=0):r(2*i):r(i),[].concat(Object(E.a)(t.pointsAnimated),[{score:i,bonusScore:o,heal:n,style:{left:e.left,top:e.top,fontSize:60}}])},P=function(t){var e=window.innerWidth,a=window.innerHeight;return t.map((function(t){return{l:e/t[0]*t[1],t:a/t[2]*t[3],h:a/t[4]}}))},B=[[4,1,4,1,4],[6,4,6,1,6],[5,4,4,3,6],[2,1,3,2,8],[9,8,3,1,6],[5,1,12,8,5],[12,1,8,1,7],[14,5,4,3,5],[9,7,6,1,4],[2,1,29,3,5],[3,2,9,5,4],[23,2,23,15,3],[48,20,5,1,5]],G={starColors:["#EF5757","#e67474","#DE9079","#C5DE79","#C0DA74","#ADC668","#9AB15D","#869D51","#738846","#60743A"],obstaclesAddressesArray:P(B),maxStarsCount:3,bounceFactor:-.33,maxVelocity:.35,maxRotation:2.5,tortoiseSize:35,topBarHeight:40},R=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={starsArr:[],obstaclesArr:M(G.obstaclesAddressesArray,G.topBarHeight,t.props.scrWidth,t.props.scrHeight),leftFlap:{transform:""},rightFlap:{transform:""},head:"-10px",rotationVelocity:0},t.starInterval=[],t.resetThisState=function(){t.setState({rearRightTransform:"",rearLeftTransform:"",left:t.props.scrWidth/2,top:t.props.scrHeight/2,rotation:0,horizontalVelocity:0,verticalVelocity:0,health:t.props.health,pointsAnimated:[],leftFlap:{moving:0,speed:0,transform:"",sign:0,key:"a"},rightFlap:{moving:0,speed:0,transform:"",sign:1,key:"d"},head:"-10px",rotationVelocity:0,healthChange:0})},t.update=function(){if("game"===t.props.gameState){var e,a={leftFlap:Object(l.a)({},t.state.leftFlap),rightFlap:Object(l.a)({},t.state.rightFlap),rearLeftTransform:"rotate(-20deg)",rearRightTransform:"rotate(20deg)",top:t.state.top,left:t.state.left,rotation:t.state.rotation+0,rotationVelocity:t.state.rotationVelocity,head:"-10px",health:t.state.health,pointsAnimated:t.state.pointsAnimated,healthChange:0};Object.assign(a.leftFlap,W(a.leftFlap,t.props.keysPressed)),Object.assign(a.rightFlap,W(a.rightFlap,t.props.keysPressed)),a.rotation=a.rotation+a.leftFlap.speed-a.rightFlap.speed,a.horizontalVelocity=t.state.horizontalVelocity-G.maxVelocity*(a.leftFlap.speed+a.rightFlap.speed)/4*Math.cos(t.state.rotation*Math.PI/180),a.verticalVelocity=t.state.verticalVelocity+G.maxVelocity*(a.leftFlap.speed+a.rightFlap.speed)/4*Math.sin(t.state.rotation*Math.PI/180),t.props.keysPressed.s&&(a.rearRightTransform="rotate(-40deg)",a.rearLeftTransform="rotate(40deg)",a.horizontalVelocity=.97*a.horizontalVelocity,a.verticalVelocity=.97*a.verticalVelocity),Object.assign(a,H(a,G.maxRotation));for(var r=0;r<t.state.starsArr.length;r++){var o=t.state.starsArr[r];T(G.tortoiseSize,a.left,a.top,o)&&(a.pointsAnimated=N(a,o,G.starColors,t.props.addToScore),window.clearInterval(t.starInterval[r]),F(r,Object(_.a)(t),G.tortoiseSize))}for(var s=0;s<t.props.maxObstaclesNum;s++)j(G.tortoiseSize,a.left,a.top,t.state.obstaclesArr[s])&&(a.health-=1);t.props.keysPressed.w&&(a.head="-20px",a.horizontalVelocity*=1.005,a.verticalVelocity*=1.005),Object.assign(a,z(a,G,t.props)),Object.assign(a,k(a.left,a.top,a.horizontalVelocity,a.verticalVelocity)),Object.assign(a,O(a.rotation)),t.state.health&&(e=t.state.health-a.health),a.pointsAnimated&&(a.pointsAnimated=a.pointsAnimated.map((function(t){var e=t.style.fontSize,a="36, 91, 150,";return t.heal&&(a="68, 152, 27,"),e<300?Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)(Object(l.a)({},t.style),{},{fontSize:e+2,color:"rgba(".concat(a," 0.").concat(999-3*e,")")})}):""})).filter((function(t){return""!==t}))),e&&0!==e&&(a.healthChange=e,t.props.updateHealth(e)),t.setState(Object(l.a)({},a))}},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.resetThisState(),window.onresize=function(){t.props.checkWindowSize(),G.obstaclesAddressesArray=P(),t.setState({obstaclesArr:M(G.obstaclesAddressesArray,G.topBarHeight,t.props.scrWidth,t.props.scrHeight)})},this.interval=window.setInterval(this.update,this.props.frameLength)}},{key:"componentDidUpdate",value:function(t,e){"start"===t.gameState&&"game"===this.props.gameState&&(console.log("ze start na game"),this.resetThisState()),this.state.starsArr.length<G.maxStarsCount&&F(this.state.starsArr.length,this,G.tortoiseSize)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval),window.clearInterval(this.starInterval)}},{key:"render",value:function(){var t;if(0!==this.state.healthChange&&this.state.top){var e=this.state.healthChange>0?"#e338":"#3f38";t=o.a.createElement("div",{id:A.a.healthIndicator,style:{backgroundColor:e,top:this.state.top-G.tortoiseSize,left:this.state.left-G.tortoiseSize}})}for(var a=this.state.starsArr.map((function(t,e){return o.a.createElement("div",{className:A.a.star,key:e,style:{left:t.left,top:t.top,backgroundColor:G.starColors[t.bgColor]}})})),r=[],s=0;s<this.props.maxObstaclesNum;s++){var n=this.state.obstaclesArr[s];r.push(o.a.createElement("div",{className:A.a.obstacle,key:s,style:{left:n.left,top:n.top,height:n.height}}))}var i="";return this.state.pointsAnimated&&(i=this.state.pointsAnimated.map((function(t,e){var a=0===t.bonusScore?"":"+".concat(t.bonusScore);return o.a.createElement("div",{className:A.a.pointsAnimated,key:e,style:t.style},t.score,a)}))),o.a.createElement("div",null,a,t,o.a.createElement("div",{id:A.a.Tortoise,style:{left:this.state.left,top:this.state.top,transform:"translate(-50%, -50%) rotate(".concat(this.state.rotation,"deg)")}},o.a.createElement("div",{className:A.a.head,style:{top:this.state.head}}),o.a.createElement("div",{className:A.a.flap,style:{transform:this.state.rightFlap.transform}}),o.a.createElement("div",{className:[A.a.flap,A.a.left].join(" "),style:{transform:this.state.leftFlap.transform}}),o.a.createElement("div",{className:A.a.rear,style:{transform:this.state.rearRightTransform}}),o.a.createElement("div",{className:[A.a.rear,A.a.left].join(" "),style:{transform:this.state.rearLeftTransform}})),r,i)}}]),a}(r.Component),D=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,gameState:"start"},t.frameLength=16,t.resetThisState=function(){t.setState({rotation:0,keysPressed:{},score:0,health:100,maxObstaclesNum:B.length})},t.checkWindowSize=function(){t.setState({windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight})},t.addToScore=function(e){var a=Math.floor((t.state.score+e)/50);a>13&&(a=13),console.log(t.state.score+e,a),t.setState({score:t.state.score+e,maxObstaclesNum:a})},t.updateHealth=function(e){t.state.health-e>=100?t.setState({health:100}):t.state.health-2*e>0?t.setState({health:t.state.health-2*e}):t.changeGameState("over")},t.changeGameState=function(e){var a={gameState:e};"game"===e&&Object.assign(a,{rotation:0,keysPressed:{},score:0,health:100,maxObstaclesNum:0}),"over"===e&&(localStorage.hiscore=Math.max(t.state.score,localStorage.hiscore)),t.setState(Object(l.a)({},a))},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.resetThisState(),document.onkeyup=function(e){var a=Object(l.a)({},t.state.keysPressed);delete a[e.key],t.setState({keysPressed:a})},document.onkeydown=function(e){var a=Object(l.a)(Object(l.a)({},t.state.keysPressed),{},Object(i.a)({},e.key,1));t.setState({keysPressed:a})}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(w,{width:this.state.windowInnerWidth,height:this.state.windowInnerHeight,backgroundColor:"#132f4c",health:this.state.health,score:this.state.score,gameState:this.state.gameState,changeGameState:this.changeGameState}),o.a.createElement(R,{scrWidth:this.state.windowInnerWidth,scrHeight:this.state.windowInnerHeight,rotation:this.state.rotation,keysPressed:this.state.keysPressed,frameLength:this.frameLength,checkWindowSize:this.checkWindowSize,addToScore:this.addToScore,updateHealth:this.updateHealth,health:this.state.health,maxObstaclesNum:this.state.maxObstaclesNum,gameState:this.state.gameState}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.17a5e4c7.chunk.js.map